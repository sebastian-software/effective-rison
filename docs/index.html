<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rison Demo — @effective/rison</title>
    <!-- Vite will inline styles and scripts into this HTML via single-file plugin -->
  </head>
  <body>
    <header>
      <h1>@effective/rison Demo</h1>
      <p>Live encoding/decoding — Source → Converted → Restored</p>
      <div class="controls" role="radiogroup" aria-label="Compression mode">
        <span class="controls-label">Compression:</span>
        <label><input type="radio" name="mode" value="auto" checked /> auto</label>
        <label><input type="radio" name="mode" value="deflate" /> deflate</label>
        <label><input type="radio" name="mode" value="none" /> none</label>
      </div>

      <div class="controls" role="radiogroup" aria-label="Storage encoding">
        <span class="controls-label">Storage encoding:</span>
        <label><input type="radio" name="storageEncoding" value="base32768" checked /> base32768</label>
        <label><input type="radio" name="storageEncoding" value="base64" /> base64</label>
      </div>
      <p>
        Repo:
        <a href="https://github.com/sebastian-software/effective-rison" target="_blank" rel="noreferrer"
          >sebastian-software/effective-rison</a
        >
      </p>
    </header>
    <main class="grid grid-storage single">
      <section id="sourceSection">
        <div class="label-row">
          <label for="source">Source (editable)</label>
          <div class="meta-inline">
            <span id="sourceWarn" class="warn"></span><span id="sourceMeta">Characters: 0</span>
          </div>
        </div>
        <div class="preset-buttons">
          <button id="btnShort" type="button">Short</button>
          <button id="btnMedium" type="button">Medium</button>
          <button id="btnLong" type="button">Long</button>
        </div>
        <textarea id="source" spellcheck="false" wrap="off">
{
  "tableId": "orders",
  "pagination": { "page": 7, "pageSize": 50 },
  "sorting": [
    { "id": "createdAt", "desc": true },
    { "id": "total", "desc": false }
  ],
  "columnVisibility": {
    "customerEmail": false,
    "internalNotes": false
  },
  "filters": {
    "status": ["paid", "shipped"],
    "total": { "gte": 100, "lte": 1000 },
    "createdAt": { "from": "2024-01-01", "to": "2024-06-30" },
    "customer": { "like": "smith" }
  },
  "columns": [
    "id",
    "createdAt",
    "customer",
    "status",
    "total",
    "currency",
    "items"
  ]
}</textarea>
      </section>
      <section id="convertedUrlSection">
        <div class="label-row">
          <label for="convertedUrl">Converted (URL)</label>
          <div class="meta-inline"><span id="convertedUrlMeta">Characters: 0 • Compression: 0%</span></div>
        </div>
        <textarea id="convertedUrl" readonly wrap="soft"></textarea>
      </section>
      <section id="restoredUrlSection">
        <div class="label-row">
          <div class="title-with-status">
            <label for="restoredUrl">Restored (URL)</label>
            <span id="restoredUrlStatus" class="status">—</span>
          </div>
        </div>
        <textarea id="restoredUrl" readonly wrap="off"></textarea>
      </section>
      
      <!-- Storage row below -->
      <section id="convertedStorageSection">
        <div class="label-row">
          <label for="storageToken">Converted (Storage)</label>
          <div class="meta-inline"><span id="storageMeta">Characters: 0 • Compression: 0%</span></div>
        </div>
        <textarea id="storageToken" readonly wrap="soft"></textarea>
      </section>
      <section id="restoredStorageSection">
        <div class="label-row">
          <div class="title-with-status">
            <label for="storageRestored">Restored (Storage)</label>
            <span id="restoredStorageStatus" class="status">—</span>
          </div>
        </div>
        <textarea id="storageRestored" readonly wrap="off"></textarea>
      </section>
    </main>
    <footer>
      <small>TypeScript-first, ESM-only. © Sebastian Software GmbH.</small>
    </footer>
    <script type="module" src="/main.ts"></script>
  </body>
</html>
